function del(t,n){return dialog.confirm(n,function(){location.href=$(t).attr("href")}),!1}function randomString(t,n){for(var o="",i=(n=n||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length,e=0;e<t;e++){var a=Math.floor(Math.random()*i);o+=n.substring(a,a+1)}return o}function copy_obj(t){return JSON.parse(JSON.stringify(t))}function isObjectValueEqual(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;var o=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(n);if(o.length!=i.length)return!1;for(var e=0;e<o.length;e++){var a=o[e];if(t[a]!==n[a])return!1}return!0}function array_combine(t,n){for(var o={},i=0;i<t.length&&!(n.length<i+1);i++)o[t[i]]=n[i];return o}function callfunc(t,n,o,i){if(o){"string"==typeof o&&(o=o.split(","));var e=o.indexOf("###");0<=e?o[e]=t:o=[t].concat(o)}else o=[t];return window[n]?window[n].apply(i,o):t}function iif(t,n,o){return"0"===t&&(t=0),t?n:o}Number.prototype.format=function(t){void 0===t&&(t=2);for(var n=this.toFixed(t).split("."),o=[],i=n[0].split(""),e=i.length,a=0;a<e;a++)0<a&&a%3==0&&o.unshift(","),o.unshift(i[e-a-1]);return o.join("")+(2==n.length?"."+n[1]:"")},String.prototype.compile=function(r,t){if(t){var n=[];for(var o in r)n.push(this.compile(r[o]));return n.join("\n")}return this.replace(/\{@([\w\d\.]+)(?:\|([\w\d]+)(?:\s*=\s*([\w\d,\s#]+))?)?\}/g,function(t,n,o,i){if(0<n.indexOf(".")){for(var e=n.split("."),a=r,s=0;s<e.length;s++){if(void 0===a[e[s]]){a="";break}a=a[e[s]]}return callfunc(a,o,i)}return void 0!==r[n]?callfunc(r[n],o,i,r):""})};var dialogTpl='<div class="modal fade" id="{@id}" tabindex="-1" role="dialog" aria-labelledby="{@id}Label" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" id="{@id}Label"></h4>\n                <button type="button" class="close" data-dismiss="modal">\n                    <span aria-hidden="true">&times;</span>\n                    <span class="sr-only">Close</span>\n                </button>\n            </div>\n            <div class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <nav class="nav nav-fill"></nav>\n            </div>\n        </div>\n    </div>\n</div>',dialogIdx=0;function Dialog(t){if(t||(t={}),void 0!==t.btns){"string"==typeof t.btns&&(t.btns=[t.btns]);for(var n=-1,o=0;o<t.btns.length;o++)"string"==typeof t.btns[o]&&(t.btns[o]={text:t.btns[o]}),t.btns[o].isdefault&&(n=o);n<0&&(n=t.btns.length-1,t.btns[n].isdefault=!0),t.btns[n].type||(t.btns[n].type="primary"),t.defaultBtn=n}this.options=$.extend({id:"dlgModal"+dialogIdx++,size:"",btns:[{text:"取消",type:"secondary"},{text:"确定",isdefault:!0,type:"primary"}],defaultBtn:1,onsure:null,onshow:null,onshown:null,onhide:null,onhidden:null},t),this.box=$(this.options.id)}Dialog.prototype.generBtn=function(t,n){return t.type&&(t.class="btn-outline-"+t.type),'<a href="javascript:" class="nav-item btn '+(t.class?t.class:"btn-outline-secondary")+'" data-index="'+n+'">'+t.text+"</a>"},Dialog.prototype.show=function(t,n){this.box=$("#"+this.options.id),n||(n="系统提示"),this.box.length<1?($(document.body).append(dialogTpl.compile({id:this.options.id})),this.box=$("#"+this.options.id)):this.box.unbind();var o=this;Dialog.instance=o;for(var i=[],e=0;e<this.options.btns.length;e++)i.push(this.generBtn(this.options.btns[e],e));this.box.find(".modal-footer .nav").html(i.join("\n"));var a=this.box.find(".modal-dialog");a.removeClass("modal-sm").removeClass("modal-lg"),"sm"==this.options.size?a.addClass("modal-sm"):"lg"==this.options.size&&a.addClass("modal-lg"),this.box.find(".modal-title").text(n);var s=this.box.find(".modal-body");return s.html(t),this.box.on("hide.bs.modal",function(){o.options.onhide&&o.options.onhide(s,o.box),Dialog.instance=null}),this.box.on("hidden.bs.modal",function(){o.options.onhidden&&o.options.onhidden(s,o.box),o.box.remove()}),this.box.on("show.bs.modal",function(){o.options.onshow&&o.options.onshow(s,o.box)}),this.box.on("shown.bs.modal",function(){o.options.onshown&&o.options.onshown(s,o.box)}),this.box.find(".modal-footer .btn").click(function(){var t=!0,n=$(this).data("index");o.options.btns[n].click&&(t=o.options.btns[n].click.apply(this,[s,o.box])),n==o.options.defaultBtn&&o.options.onsure&&(t=o.options.onsure.apply(this,[s,o.box])),!1!==t&&o.box.modal("hide")}),this.box.modal("show"),this},Dialog.prototype.hide=function(){return this.box.modal("hide"),this};var dialog={alert:function(t,n,o){var i=!1,e="function"==typeof n;return new Dialog({btns:"确定",onsure:function(){if(e)return n(i=!0)},onhide:function(){!i&&e&&n(!1)}}).show(t,o)},confirm:function(t,n,o){return new Dialog({onsure:function(){if("function"==typeof n)return!0,n()},onhide:function(){if(!1)return o()}}).show(t)},prompt:function(t,i,n){return new Dialog({onshown:function(t){t.find("[name=confirm_input]").focus()},onsure:function(t){var n=t.find("[name=confirm_input]").val();if("function"==typeof i){var o=i(n);return!0===o&&!0,o}},onhide:function(){if(!1)return n()}}).show('<input type="text" name="confirm_input" class="form-control" />',t)},pickUser:function(a,n,s){var r=null;s||(s={});new Dialog({onshown:function(t){var n=t.find(".searchbtn"),o=t.find(".searchtext"),i=t.find(".list-group"),e=!1;n.click(function(){e||(e=!0,i.html('<span class="list-loading">加载中...</span>'),s.key=o.val(),$.ajax({url:a,type:"GET",dataType:"JSON",data:s,success:function(o){e=!1,o.status?o.data&&o.data.length?(i.html('<a href="javascript:" data-id="{@id}" class="list-group-item list-group-item-action">[{@id}]&nbsp;<i class="ion-md-person"></i> {@username}&nbsp;&nbsp;&nbsp;<small><i class="ion-md-phone-portrait"></i> {@mobile}</small></a>'.compile(o.data,!0)),i.find("a.list-group-item").click(function(){for(var t=$(this).data("id"),n=0;n<o.data.length;n++)if(o.data[n].id==t){r=o.data[n],i.find("a.list-group-item").removeClass("active"),$(this).addClass("active");break}})):i.html('<span class="list-loading"><i class="ion-md-warning"></i> 没有检索到会员</span>'):i.html('<span class="text-danger"><i class="ion-md-warning"></i> 加载失败</span>')}}))}).trigger("click")},onsure:function(t){return r?"function"==typeof n?n(r):void 0:(toastr.warning("没有选择会员!"),!1)}}).show('<div class="input-group"><input type="text" class="form-control searchtext" name="keyword" placeholder="根据会员id或名称，电话来搜索"/><div class="input-group-append"><a class="btn btn-outline-secondary searchbtn"><i class="ion-md-search"></i></a></div></div><div class="list-group mt-2"></div>',"请搜索并选择会员")},pickLocate:function(t,n,s){var r=null;new Dialog({size:"lg",onshown:function(t){var n=t.find(".searchbtn"),o=t.find(".searchtext"),i=t.find(".map"),e=t.find(".mapinfo");i.css("height",.6*$(window).height());var a=InitMap("tencent",i,function(t,n){e.html(t+"&nbsp;"+n.lng+","+n.lat),r=n},s);n.click(function(){var t=o.val();a.setLocate(t)})},onsure:function(t){return r?"function"==typeof n?n(r):void 0:(toastr.warning("没有选择位置!"),!1)}}).show('<div class="input-group"><input type="text" class="form-control searchtext" name="keyword" placeholder="填写地址检索位置"/><div class="input-group-append"><a class="btn btn-outline-secondary searchbtn"><i class="ion-md-search"></i></a></div></div><div class="map mt-2"></div><div class="mapinfo mt-2 text-muted">未选择位置</div>',"请选择地图位置")}};if(jQuery(function(t){t(document).on("keydown",function(t){if(Dialog.instance){var n=Dialog.instance;13==t.keyCode&&n.box.find(".modal-footer .btn").eq(n.options.defaultBtn).trigger("click")}})}),jQuery.extend(jQuery.fn,{tags:function(t,e){var a=[],s='<span class="badge badge-info">{@label}<input type="hidden" name="'+t+'" value="{@label}"/><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></span>',n=$(this).parents(".form-control"),r=$('<span class="badge-group"></span>'),l=this;this.before(r),this.on("keyup",function(){var t=$(this).val().replace(/，/g,","),n=!1;if(t&&-1<t.indexOf(",")){for(var o=t.split(","),i=0;i<o.length;i++)o[i]=o[i].replace(/^\s|\s$/g,""),o[i]&&-1===a.indexOf(o[i])&&(a.push(o[i]),r.append(s.compile({label:o[i]})),n=!0);l.val(""),n&&e&&e(a)}}).on("blur",function(){$(this).val($(this).val()+",").trigger("keyup")}).trigger("keyup"),r.on("click",".close",function(){var t=$(this).parents(".badge").find("input").val(),n=a.indexOf(t);n&&a.splice(n,1),$(this).parents(".badge").remove(),e&&e(a)}),n.click(function(){l.focus()})}}),$.fn.datetimepicker){var tooltips={today:"定位当前日期",clear:"清除已选日期",close:"关闭选择器",selectMonth:"选择月份",prevMonth:"上个月",nextMonth:"下个月",selectYear:"选择年份",prevYear:"上一年",nextYear:"下一年",selectDecade:"选择年份区间",prevDecade:"上一区间",nextDecade:"下一区间",prevCentury:"上个世纪",nextCentury:"下个世纪"},icons={time:"ion-md-time",date:"ion-md-calendar",up:"ion-md-arrow-dropup",down:"ion-md-arrow-dropdown",previous:"ion-md-arrow-dropleft",next:"ion-md-arrow-dropright",today:"ion-md-today",clear:"ion-md-trash",close:"ion-md-close"};$(".datepicker").datetimepicker({icons:icons,tooltips:tooltips,format:"YYYY-MM-DD",locale:"zh-cn",showClear:!0,showTodayButton:!0,showClose:!0,keepInvalid:!0}),$(".date-range").each(function(){var t=$(this).find("[name=fromdate],.fromdate"),n=$(this).find("[name=todate],.todate"),o={icons:icons,tooltips:tooltips,format:"YYYY-MM-DD",locale:"zh-cn",showClear:!0,showTodayButton:!0,showClose:!0,keepInvalid:!0};t.datetimepicker(o).on("dp.change",function(){t.val()&&n.data("DateTimePicker").minDate(t.val())}),n.datetimepicker(o).on("dp.change",function(){n.val()&&t.data("DateTimePicker").maxDate(n.val())})})}!function(e,a){var s,r,l,c={baidu:"https://api.map.baidu.com/api?ak=rO9tOdEWFfvyGgDkiWqFjxK6&v=1.5&services=false&callback=",google:"https://maps.google.com/maps/api/js?key=AIzaSyB8lorvl6EtqIWz67bjWBruOhm9NYS1e24&callback=",tencent:"https://map.qq.com/api/js?v=2.exp&key=7I5BZ-QUE6R-JXLWV-WTVAA-CJMYF-7PBBI&callback=",gaode:"https://webapi.amap.com/maps?v=1.3&key=3ec311b5db0d597e79422eeb9a6d4449&callback="};function t(t){this.mapType=t,this.ishide=!1,this.isshow=!1,this.toshow=!1,this.marker=null,this.infoWindow=null,this.mapbox=null,this.locate={lng:116.396795,lat:39.933084},this.map=null}function d(){t.call(this,"baidu")}function p(){t.call(this,"google"),this.infoOpts={width:250,title:""}}function h(){t.call(this,"tencent")}function f(){t.call(this,"gaode"),this.infoOpts={width:250,title:""}}t.prototype.isAPIReady=function(){return!1},t.prototype.setMap=function(){},t.prototype.showInfo=function(){},t.prototype.getAddress=function(t){return""},t.prototype.setLocate=function(t){},t.prototype.loadAPI=function(){var t=this;if(this.isAPIReady())return this.mapbox=a("#"+this.mapType+"map"),this.mapbox.length<1&&(this.mapbox=a('<div id="'+this.mapType+'map" class="mapbox"></div>'),r.append(this.mapbox)),!0;this.mapbox=a('<div id="'+this.mapType+'map" class="mapbox">loading...</div>'),r.append(this.mapbox);var n,o,i="mapload"+(new Date).getTime();return e[i]=function(){t.setMap(),delete e[i]},n=c[this.mapType]+i,(o=document.createElement("script")).type="text/javascript",o.src=n,document.body.appendChild(o),!1},t.prototype.bindEvents=function(){var t=this;a("#txtTitle").unbind().blur(function(){t.showInfo()}),a("#txtContent").unbind().blur(function(){t.showInfo()})},t.prototype.setInfoContent=function(){if(this.infoWindow){var t="<b>当前位置</b>",n='<p style="line-height:1.6em;"></p>';if(this.infoWindow.setTitle)this.infoWindow.setTitle(t),this.infoWindow.setContent(n);else{this.infoWindow.setContent('<h3><b>当前位置</b></h3><div style="width:250px"><p style="line-height:1.6em;"></p></div>')}}},t.prototype.showLocationInfo=function(t,n){this.showInfo();var o=this.getAddress(n),i={};"function"==typeof t.lng?(i.lng=t.lng(),i.lat=t.lat()):(i.lng=t.lng,i.lat=t.lat),l(o,i)},t.prototype.show=function(){this.ishide=!1,this.setMap(),this.showInfo()},t.prototype.hide=function(){this.ishide=!0,this.infoWindow&&this.infoWindow.close(),this.mapbox&&a(this.mapbox).remove()},((d.prototype=new t).constructor=d).prototype.isAPIReady=function(){return!!e.BMap},d.prototype.setMap=function(){var o=this;if(!this.isshow&&!this.ishide&&this.loadAPI()){var t=o.map=new BMap.Map(this.mapbox.attr("id"));t.addControl(new BMap.NavigationControl),t.addControl(new BMap.ScaleControl),t.addControl(new BMap.OverviewMapControl),t.enableScrollWheelZoom();var n=new BMap.Point(this.locate.lng,this.locate.lat);t.centerAndZoom(n,15),this.marker=new BMap.Marker(n),this.marker.enableDragging();var i=new BMap.Geocoder;this.marker.addEventListener("dragend",function(n){i.getLocation(n.point,function(t){o.showLocationInfo(n.point,t)})}),this.marker.addEventListener("click",function(n){i.getLocation(n.point,function(t){o.showLocationInfo(n.point,t)})}),t.addOverlay(this.marker),i.getLocation(n,function(t){o.showLocationInfo(n,t)}),this.infoWindow=new BMap.InfoWindow("",{width:250,title:""}),this.bindEvents(),this.isshow=!0,this.toshow&&(this.showInfo(),this.toshow=!1)}},d.prototype.showInfo=function(){this.ishide||(this.isshow?(this.setInfoContent(),this.marker.openInfoWindow(this.infoWindow)):this.toshow=!0)},d.prototype.getAddress=function(t){var n=t.addressComponents;if(n)return n.province+", "+n.city+", "+n.district+", "+n.street+", "+n.streetNumber},d.prototype.setLocate=function(t){var o=new BMap.Geocoder,i=this;o.getPoint(t,function(n){n?(i.map.centerAndZoom(n,11),i.marker.setPosition(n),o.getLocation(n,function(t){i.showLocationInfo(n,t)})):toastr.warning("地址信息不正确，定位失败")},"")},((p.prototype=new t).constructor=p).prototype.isAPIReady=function(){return e.google&&e.google.maps},p.prototype.setMap=function(){var n=this;if(!this.isshow&&!this.ishide&&this.loadAPI()&&!(this.mapbox.length<1)){var t=n.map=new google.maps.Map(this.mapbox[0],{zoom:15,draggable:!0,scaleControl:!0,streetViewControl:!0,zoomControl:!0}),o=new google.maps.LatLng(this.locate);t.panTo(o),this.marker=new google.maps.Marker({position:o,map:t,draggable:!0});var i=new google.maps.Geocoder;this.marker.addListener("dragend",function(){o=n.marker.getPosition(),i.geocode({location:o},function(t){n.showLocationInfo(o,t)})}),this.marker.addListener("click",function(){o=n.marker.getPosition(),i.geocode({location:o},function(t){n.showLocationInfo(o,t)})}),this.bindEvents(),i.geocode({location:o},function(t){n.showLocationInfo(o,t)}),this.infoWindow=new google.maps.InfoWindow({map:t}),this.infoWindow.setPosition(o),this.isshow=!0,this.toshow&&(this.showInfo(),this.toshow=!1)}},p.prototype.showInfo=function(){this.ishide||(this.isshow?(this.infoWindow.setOptions({position:this.marker.getPosition()}),this.setInfoContent()):this.toshow=!0)},p.prototype.getAddress=function(t,n){if(t&&t[0])return t[0].formatted_address},p.prototype.setLocate=function(t){var o=new google.maps.Geocoder,i=this;o.getPoint(t,function(n){n?(i.map.centerAndZoom(n,11),i.marker.setPosition(n),o.getLocation(n,function(t){i.showLocationInfo(n,t)})):toastr.warning("地址信息不正确，定位失败")},"")},((h.prototype=new t).constructor=h).prototype.isAPIReady=function(){return e.qq&&e.qq.maps},h.prototype.setMap=function(){var n=this;if(!this.isshow&&!this.ishide&&this.loadAPI()){var t=n.map=new qq.maps.Map(this.mapbox[0],{zoom:15});new qq.maps.ScaleControl({align:qq.maps.ALIGN.BOTTOM_LEFT,margin:qq.maps.Size(85,15),map:t});var o=new qq.maps.LatLng(this.locate.lat,this.locate.lng);t.panTo(o),this.marker=new qq.maps.Marker({position:o,draggable:!0,map:t}),this.marker.setAnimation(qq.maps.MarkerAnimation.DOWN);var i=new qq.maps.Geocoder({complete:function(t){n.showLocationInfo(o,t)}});qq.maps.event.addListener(this.marker,"click",function(){o=n.marker.getPosition(),i.getAddress(o)}),qq.maps.event.addListener(this.marker,"dragend",function(){o=n.marker.getPosition(),i.getAddress(o)}),i.getAddress(o),this.bindEvents(),this.infoWindow=new qq.maps.InfoWindow({map:t}),this.isshow=!0,this.toshow&&(this.showInfo(),this.toshow=!1)}},h.prototype.showInfo=function(){this.ishide||(this.isshow?(this.infoWindow.open(),this.setInfoContent(),this.infoWindow.setPosition(this.marker.getPosition())):this.toshow=!0)},h.prototype.getAddress=function(t){if(t&&t.detail)return t.detail.address},h.prototype.setLocate=function(t){var o=this;new qq.maps.Geocoder({complete:function(t){if(t&&t.detail&&t.detail.location){var n=t.detail.location;o.map.setCenter(n),o.marker.setPosition(n),o.showLocationInfo(n,t)}else toastr.warning("地址信息不正确，定位失败")},error:function(t){toastr.warning("地址信息不正确，定位失败")}}).getLocation(t)},((f.prototype=new t).constructor=f).prototype.isAPIReady=function(){return!!e.AMap},f.prototype.setMap=function(){var i=this;if(!this.isshow&&!this.ishide&&this.loadAPI()){var n=i.map=new AMap.Map(this.mapbox.attr("id"),{resizeEnable:!0,dragEnable:!0,zoom:13});n.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){n.addControl(new AMap.ToolBar),n.addControl(new AMap.Scale),n.addControl(new AMap.OverView)}),a("[name=txtLang]").unbind().on("change",function(){var t=a(this).val();t&&n.setLang(t)}).trigger("change");var o=new AMap.LngLat(this.locate.lng,this.locate.lat);n.setCenter(o),this.marker=new AMap.Marker({position:o,map:n}),this.marker.setDraggable(!0),this.infoWindow=new AMap.InfoWindow,this.infoWindow.open(n,o),n.plugin(["AMap.Geocoder"],function(){var t=new AMap.Geocoder;i.marker.on("dragend",function(o){t.getAddress(o.lnglat,function(t,n){i.showLocationInfo(o.lnglat,n)})}),i.marker.on("click",function(o){t.getAddress(o.lnglat,function(t,n){i.showLocationInfo(o.lnglat,n)})}),t.getAddress(o,function(t,n){i.showLocationInfo(o,n)})}),this.bindEvents(),this.isshow=!0,this.toshow&&(this.showInfo(),this.toshow=!1)}},f.prototype.showInfo=function(){this.ishide||(this.isshow?(this.setInfoContent(),this.infoWindow.setPosition(this.marker.getPosition())):this.toshow=!0)},f.prototype.getAddress=function(t){return t.regeocode.formattedAddress},f.prototype.setLocate=function(t){var o=new AMap.Geocoder,i=this;o.getPoint(t,function(n){n?(i.map.centerAndZoom(n,11),i.marker.setPosition(n),o.getLocation(n,function(t){i.showLocationInfo(n,t)})):toastr.warning("地址信息不正确，定位失败")},"")},e.InitMap=function(t,n,o,i){switch(s&&s.hide(),r=a(n),l=o,t.toLowerCase()){case"baidu":s=new d;break;case"google":s=new p;break;case"tencent":case"qq":s=new h;break;case"gaode":s=new f}if(!s)return toastr.warning("不支持该地图类型");if(i){if("string"==typeof i){var e=i.split(",");i={lng:parseFloat(e[0]),lat:parseFloat(e[1])}}s.locate=i}return s.setMap(),s}}(window,jQuery),jQuery(function(r){var t=r(".breadcrumb"),n=t.data("menu");if(n){var o=r(".side-nav a[data-key="+n+"]"),i=[];if(0<o.length)if(o.is(".menu_top"))i.push('<li class="breadcrumb-item"><a href="javascript:"><i class="'+o.find("i").attr("class")+'"></i>&nbsp;'+o.text()+"</a></li>");else{var e=o.parents(".collapse").eq(0);e.addClass("show"),o.addClass("active");var a=e.siblings(".card-header").find("a.menu_top");i.push('<li class="breadcrumb-item"><a href="javascript:"><i class="'+a.find("i").attr("class")+'"></i>&nbsp;'+a.text()+"</a></li>"),i.push('<li class="breadcrumb-item"><a href="javascript:">'+o.text()+"</a></li>")}var s=t.data("title");s&&i.push('<li class="breadcrumb-item active" aria-current="page">'+s+"</li>"),t.html(i.join("\n"))}r(".checkall-btn").click(function(t){var n=r(this).data("target");n||(n="id");var o=r("[name="+n+"]");r(this).is(".active")?o.removeAttr("checked"):o.attr("checked",!0)}),r(".checkreverse-btn").click(function(t){var n=r(this).data("target");n||(n="id");for(var o=r("[name="+n+"]"),i=0;i<o.length;i++)o[i].checked?o.eq(i).removeAttr("checked"):o.eq(i).attr("checked",!0)}),r(".action-btn").click(function(t){t.preventDefault();var n=r(this).data("action");if(!n)return toastr.error("未知操作");if(n="action"+n.replace(/^[a-z]/,function(t){return t.toUpperCase()}),!window[n]||"function"!=typeof window[n])return toastr.error("未知操作");var o=r(this).data("needChecks");if(void 0===o&&(o=!0),o){var i=r(this).data("target");i||(i="id");var e=r("[name="+i+"]:checked");if(e.length<1)return toastr.warning("请选择需要操作的项目");for(var a=[],s=0;s<e.length;s++)a.push(e.eq(s).val());window[n](a)}else window[n]()}),r("a[rel=ajax]").click(function(t){t.preventDefault();var o=r(this),n=r(this).data("title");n||(n=r(this).text());new Dialog({btns:["确定"],onshow:function(n){r.ajax({url:o.attr("href"),success:function(t){n.html(t)}})}}).show('<p class="loading">加载中...</p>',n)}),r(".nav-tabs a").click(function(t){t.preventDefault(),r(this).tab("show")}),r(".custom-file .custom-file-input").on("change",function(){r(this).parents(".custom-file").find(".custom-file-label").text(r(this).val())}),r(".btn-primary[type=submit]").click(function(t){var n=r(this).parents("form"),o=this,i={url:r(n).attr("action"),type:"POST",dataType:"JSON",success:function(t){1==t.code?new Dialog({onhidden:function(){t.url?location.href=t.url:location.reload()}}).show(t.msg):(toastr.warning(t.msg),r(o).removeAttr("disabled"))}};if("multipart/form-data"===n.attr("enctype")){if(!FormData)return!0;i.data=new FormData(n[0]),i.cache=!1,i.processData=!1,i.contentType=!1}else i.data=r(n).serialize();t.preventDefault(),r(this).attr("disabled",!0),r.ajax(i)}),r(".pickuser").click(function(t){var n=r(this).parents(".input-group"),o=n.find("[name=member_id]"),i=n.find("[name=member_info]");dialog.pickUser(r(this).data("url"),function(t){o.val(t.id),i.val("["+t.id+"] "+t.username+(t.mobile?" / "+t.mobile:""))},r(this).data("filter"))}),r(".pick-locate").click(function(t){var n=r(this).parents(".input-group").find("input[type=text]");dialog.pickLocate("qq",function(t){n.val(t.lng+","+t.lat)},n.val())})});